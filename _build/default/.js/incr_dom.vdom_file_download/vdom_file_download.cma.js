// Generated by js_of_ocaml
//# buildInfo:effects=false, use-js-string=false, version=5.0.1
(function
   (globalThis)
   {"use strict";
    var
     runtime=globalThis.jsoo_runtime,
     caml_string_of_jsbytes=runtime.caml_string_of_jsbytes;
    function caml_call1(f,a0)
     {return f.length == 1?f(a0):runtime.caml_call_gen(f,[a0])}
    function caml_call2(f,a0,a1)
     {return f.length == 2?f(a0,a1):runtime.caml_call_gen(f,[a0,a1])}
    function caml_call3(f,a0,a1,a2)
     {return f.length == 3?f(a0,a1,a2):runtime.caml_call_gen(f,[a0,a1,a2])}
    var
     global_data=runtime.caml_get_global_data(),
     cst_Download_triggered=caml_string_of_jsbytes("Download triggered"),
     cst_Vdom_file_download=caml_string_of_jsbytes("Vdom_file_download"),
     cst_vdom_file_download=caml_string_of_jsbytes("vdom_file_download"),
     cst_vdom_file_download_vdom_fi=
      caml_string_of_jsbytes("vdom_file_download/vdom_file_download.ml"),
     cst=caml_string_of_jsbytes(""),
     cst_vdom_file_download$0=caml_string_of_jsbytes("vdom_file_download"),
     cst_vdom_file_download$1=caml_string_of_jsbytes("vdom_file_download"),
     cst_Vdom_file_download$0=caml_string_of_jsbytes("Vdom_file_download"),
     Virtual_dom_Effect=global_data.Virtual_dom__Effect,
     Css_gen=global_data.Css_gen,
     Virtual_dom_Vdom=global_data.Virtual_dom__Vdom,
     Core_List=global_data.Core__List,
     Virtual_dom_Node=global_data.Virtual_dom__Node,
     Core=global_data.Core,
     Sexplib0_Sexp_conv=global_data.Sexplib0__Sexp_conv,
     Js_of_ocaml_Dom_html=global_data.Js_of_ocaml__Dom_html,
     Core_Bigstring=global_data.Core__Bigstring,
     Js_of_ocaml_Typed_array=global_data.Js_of_ocaml__Typed_array,
     Js_of_ocaml_File=global_data.Js_of_ocaml__File;
    global_data.Base__Field;
    var
     Ppx_module_timer_runtime=global_data.Ppx_module_timer_runtime,
     Ppx_bench_lib_Benchmark_accumu=
      global_data.Ppx_bench_lib__Benchmark_accumulator,
     Expect_test_collector=global_data.Expect_test_collector,
     Ppx_inline_test_lib_Runtime=global_data.Ppx_inline_test_lib__Runtime;
    caml_call1(Ppx_module_timer_runtime[4],cst_Vdom_file_download);
    caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1],cst_vdom_file_download);
    caml_call1(Expect_test_collector[5][1],cst_vdom_file_download_vdom_fi);
    caml_call2(Ppx_inline_test_lib_Runtime[2],cst_vdom_file_download$0,cst);
    var
     _d_=[0,869834347,caml_string_of_jsbytes("grey")],
     _b_=[0,caml_string_of_jsbytes("mimetype")],
     _c_=[0,caml_string_of_jsbytes("filename")],
     _a_=
      [0,
       [11,caml_string_of_jsbytes("<downloader: "),[2,0,[12,62,0]]],
       caml_string_of_jsbytes("<downloader: %s>")];
    function create(filename,mimetype,contents)
     {return [0,filename,mimetype,contents]}
    function sexp_of_t(t){return [0,caml_call2(Core[257],_a_,t[1])]}
    function trigger(param)
     {var contents=param[3],mimetype=param[2],filename=param[1];
      if(Core[540])
       {var
         _l_=[0,caml_call1(Sexplib0_Sexp_conv[7],contents),0],
         _m_=[0,[1,[0,_b_,[0,caml_call1(Core[471],mimetype),0]]],_l_],
         _n_=[0,[1,[0,_c_,[0,caml_call1(Core[471],filename),0]]],_m_],
         _o_=
          [1,[0,caml_call1(Sexplib0_Sexp_conv[7],cst_Download_triggered),_n_]];
        return caml_call2(Core[248],0,_o_)}
      var
       t9=caml_call1(Js_of_ocaml_Dom_html[66],Js_of_ocaml_Dom_html[2]),
       _p_=caml_call3(Core_Bigstring[14],0,0,contents),
       contents_bigstr=caml_call1(Js_of_ocaml_Typed_array[50][1],_p_),
       t1=
        caml_call3
         (Js_of_ocaml_File[2],
          [0,mimetype],
          0,
          [0,[0,1037850489,contents_bigstr],0]),
       t2=Js_of_ocaml_Dom_html[8].URL,
       t11=t2.createObjectURL(t1);
      t9.setAttribute("href",t11);
      var t7=runtime.caml_jsstring_of_string(filename);
      t9.setAttribute("download",t7);
      t9.click();
      var t12=Js_of_ocaml_Dom_html[8].URL;
      return t12.revokeObjectURL(t11)}
    function create$0(opt,_f_,_e_,get_download,button_text,param)
     {if(opt)var sth=opt[1],enabled=sth;else var enabled=1;
      if(_f_)
       var sth$0=_f_[1],on_click=sth$0;
      else
       var on_click=function(param){return Virtual_dom_Effect[1]};
      if(_e_)var sth$1=_e_[1],extra_attrs=sth$1;else var extra_attrs=0;
      function trigger_csv_download(ev)
       {trigger(caml_call1(get_download,0));return caml_call1(on_click,ev)}
      if(enabled)
       var enabled_disabled=0;
      else
       var
        _j_=caml_call1(Css_gen[49],_d_),
        _k_=[0,caml_call1(Virtual_dom_Vdom[1][28],_j_),0],
        enabled_disabled=[0,Virtual_dom_Vdom[1][18],_k_];
      var
       _g_=
        [0,
         extra_attrs,
         [0,
          enabled_disabled,
          [0,[0,caml_call1(Virtual_dom_Vdom[1][47],trigger_csv_download),0],0]]],
       attrs=caml_call1(Core_List[133],_g_),
       _h_=[0,caml_call1(Virtual_dom_Node[5],button_text),0],
       _i_=[0,caml_call1(Virtual_dom_Vdom[1][9],attrs)];
      return caml_call3(Virtual_dom_Node[9],0,_i_,_h_)}
    var Button=[0,create$0];
    caml_call1(Ppx_inline_test_lib_Runtime[3],cst_vdom_file_download$1);
    caml_call1(Expect_test_collector[5][2],0);
    caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2],0);
    caml_call1(Ppx_module_timer_runtime[5],cst_Vdom_file_download$0);
    var Vdom_file_download=[0,sexp_of_t,create,trigger,Button];
    runtime.caml_register_global(41,Vdom_file_download,"Vdom_file_download");
    return}
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJ2ZG9tX2ZpbGVfZG93bmxvYWQuY21hLmpzIiwic291cmNlUm9vdCI6IiIsIm5hbWVzIjpbImNyZWF0ZSIsImZpbGVuYW1lIiwibWltZXR5cGUiLCJjb250ZW50cyIsInNleHBfb2ZfdCIsInQiLCJ0cmlnZ2VyIiwiY29udGVudHNfYmlnc3RyIiwiY3JlYXRlJDAiLCJvcHQiLCJnZXRfZG93bmxvYWQiLCJidXR0b25fdGV4dCIsInN0aCIsImVuYWJsZWQiLCJzdGgkMCIsIm9uX2NsaWNrIiwic3RoJDEiLCJleHRyYV9hdHRycyIsInRyaWdnZXJfY3N2X2Rvd25sb2FkIiwiZXYiLCJlbmFibGVkX2Rpc2FibGVkIiwiYXR0cnMiXSwic291cmNlcyI6WyIvaG9tZS9iZW4vLm9wYW0vNC4xNC9saWIvaW5jcl9kb20vdmRvbV9maWxlX2Rvd25sb2FkL3Zkb21fZmlsZV9kb3dubG9hZC5tbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7STs7Ozs7Ozs7O0lBaURNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzthQXZDRkEsT0FQQ0M7MkNBQUM7YUFRRkcsVUFBVUMsR0FBYyxtQ0FBZEEsTUFBcUQ7YUFFL0RDO1VBQThCSCxrQkFBVkQsa0JBQVZEOzs7aURBQW9CRTtrREFBVkQ7a0RBQVZEOzs7O01BUUY7O09BRStCLHNDQVZURTtPQVU1QjtPQU1BOzs7YUFoQmtCRDs7MkJBU2hCSzs7OztNQURJLE9BWStCLGdDQXBCN0JOOzs7TUFRRjs7YUFrQk5PLFNBQ0lDLFlBR0RDLGFBQ0FDO01BR0wsR0FQTUYsSUFBVSxRQUFWQSxlQUFVRyxhQUFWQztNQU9OO09BTmlCLGlCQUFYRSxTQUFXRDs7V0FBWEMseUJBQW9CLDRCQUFrQjtNQUEzQixPQUNHLGlCQUFkRSxZQUFjRCxlQUFkQztNQUtOLFNBQ0lDLHFCQUFxQkM7UUFDdkIsUUFBUSxXQU5MVCxpQkFNSCxrQkFSSUssU0FPbUJJLEdBRVo7TUFIYixHQVBNTjtXQVlGTzs7T0FDa0Q7O1FBQVg7UUFEdkNBO01BSWlDOzs7U0FkL0JIOztVQVVGRztnQkFJaUMsbUNBUmpDRjtPQVFGO09BR2tELHNDQWYvQ1A7T0FlYSx5Q0FKZFU7TUFJYyxnREFBeUQ7a0JBcEJ6RWI7Ozs7OzhCQTVCRkosVUFEQUosT0FHQU07O1UiLCJzb3VyY2VzQ29udGVudCI6WyJvcGVuIENvcmVcbm9wZW4gVmlydHVhbF9kb21cblxudHlwZSB0ID1cbiAgeyBmaWxlbmFtZSA6IHN0cmluZ1xuICA7IG1pbWV0eXBlIDogc3RyaW5nXG4gIDsgY29udGVudHMgOiBzdHJpbmdcbiAgfVxuW0BAZGVyaXZpbmcgZmllbGRzXVxuXG5sZXQgY3JlYXRlID0gRmllbGRzLmNyZWF0ZVxubGV0IHNleHBfb2ZfdCB0ID0gU2V4cC5BdG9tIChzcHJpbnRmIFwiPGRvd25sb2FkZXI6ICVzPlwiIHQuZmlsZW5hbWUpXG5cbmxldCB0cmlnZ2VyIHsgZmlsZW5hbWU7IG1pbWV0eXBlOyBjb250ZW50cyB9ID1cbiAgbGV0IG9wZW4gSnNfb2Zfb2NhbWwgaW5cbiAgaWYgYW1fcnVubmluZ19pbmxpbmVfdGVzdFxuICB0aGVuXG4gICAgcHJpbnRfc1xuICAgICAgWyVtZXNzYWdlIFwiRG93bmxvYWQgdHJpZ2dlcmVkXCIgKGZpbGVuYW1lIDogc3RyaW5nKSAobWltZXR5cGUgOiBzdHJpbmcpIGNvbnRlbnRzXVxuICBlbHNlIChcbiAgICAoKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTkzMjg4OTEvNTU4NTkyICopXG4gICAgbGV0IGEgPSBEb21faHRtbC5jcmVhdGVBIERvbV9odG1sLmRvY3VtZW50IGluXG4gICAgbGV0IGNvbnRlbnRzX2JpZ3N0ciA9XG4gICAgICBUeXBlZF9hcnJheS5CaWdzdHJpbmcudG9fYXJyYXlCdWZmZXIgKEJpZ3N0cmluZy5vZl9zdHJpbmcgY29udGVudHMpXG4gICAgaW5cbiAgICBsZXQgYmxvYiA9XG4gICAgICAoKiBEb24ndCB1c2UgW2Jsb2JfZnJvbV9zdHJpbmddLiBUaGF0IGhhcyBhbiBhdHRyYWN0aXZlIHR5cGUgYnV0IHdvcmtzIGJ5IGZpcnN0XG4gICAgICAgICBjb252ZXJ0aW5nIG91ciBPQ2FtbCBzdHJpbmcgdG8gYSBKYXZhc2NyaXB0IHN0cmluZywgd2hpY2ggY29udmVydHMgdG9cbiAgICAgICAgIFVURi0xNi4gSWYgdGhlIHN0cmluZyBjb250YWlucyByYW5kb20gYmluYXJ5IGRhdGEgdGhhdCB3aWxsIGRpc3RvcnQgaXQuICopXG4gICAgICBGaWxlLmJsb2JfZnJvbV9hbnkgWyBgYXJyYXlCdWZmZXIgY29udGVudHNfYmlnc3RyIF0gfmNvbnRlbnRUeXBlOm1pbWV0eXBlXG4gICAgaW5cbiAgICBsZXQgdXJsID0gRG9tX2h0bWwud2luZG93IyMuX1VSTCMjY3JlYXRlT2JqZWN0VVJMIGJsb2IgaW5cbiAgICBhIyNzZXRBdHRyaWJ1dGUgKEpzLnN0cmluZyBcImhyZWZcIikgdXJsO1xuICAgIGEjI3NldEF0dHJpYnV0ZSAoSnMuc3RyaW5nIFwiZG93bmxvYWRcIikgKEpzLnN0cmluZyBmaWxlbmFtZSk7XG4gICAgYSMjY2xpY2s7XG4gICAgRG9tX2h0bWwud2luZG93IyMuX1VSTCMjcmV2b2tlT2JqZWN0VVJMIHVybClcbjs7XG5cbm1vZHVsZSBCdXR0b24gPSBzdHJ1Y3RcbiAgbGV0IGNyZWF0ZVxuICAgICAgICA/KGVuYWJsZWQgPSB0cnVlKVxuICAgICAgICA/KG9uX2NsaWNrID0gZnVuIF8gLT4gVmRvbS5FZmZlY3QuSWdub3JlKVxuICAgICAgICA/KGV4dHJhX2F0dHJzID0gW10pXG4gICAgICAgIH5nZXRfZG93bmxvYWRcbiAgICAgICAgfmJ1dHRvbl90ZXh0XG4gICAgICAgICgpXG4gICAgPVxuICAgIGxldCBvcGVuIFZkb20gaW5cbiAgICBsZXQgdHJpZ2dlcl9jc3ZfZG93bmxvYWQgZXYgPVxuICAgICAgdHJpZ2dlciAoZ2V0X2Rvd25sb2FkICgpKTtcbiAgICAgIG9uX2NsaWNrIGV2XG4gICAgaW5cbiAgICBsZXQgZW5hYmxlZF9kaXNhYmxlZCA9XG4gICAgICBpZiBlbmFibGVkIHRoZW4gW10gZWxzZSBbIEF0dHIuZGlzYWJsZWQ7IEF0dHIuc3R5bGUgKENzc19nZW4uY29sb3IgKGBOYW1lIFwiZ3JleVwiKSkgXVxuICAgIGluXG4gICAgbGV0IGF0dHJzID1cbiAgICAgIFsgZXh0cmFfYXR0cnM7IGVuYWJsZWRfZGlzYWJsZWQ7IFsgQXR0ci5vbl9jbGljayB0cmlnZ2VyX2Nzdl9kb3dubG9hZCBdIF1cbiAgICAgIHw+IExpc3QuY29uY2F0XG4gICAgaW5cbiAgICBOb2RlLmJ1dHRvbiB+YXR0cjooQXR0ci5tYW55X3dpdGhvdXRfbWVyZ2UgYXR0cnMpIFsgTm9kZS50ZXh0IGJ1dHRvbl90ZXh0IF1cbiAgOztcbmVuZFxuIl19
